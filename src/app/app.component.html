<div class="po-wrapper">
  <po-toolbar p-title="MyForecastMapBR"></po-toolbar>

  <po-menu [p-menus]="menus" [p-collapsed]="true"></po-menu>

  <po-page-default p-title="MyForecastMapBR">

    <div class="d-flex">
      <po-container class="po-md-7" p-title="Escolha a cidade para a previsão:">
        <po-combo
          p-field-label="nome"
          p-field-value="nome"
          p-icon="ph ph-map-trifold"
          [p-filter-service]="cityService"
          (p-change)="loadWeatherByCity($event)"
          [p-change-on-enter]="true"
          p-disable-tab-filter
          p-placeholder="Selecione a cidade para consultar a previsão do tempo"
          p-label="Cidade"
          class="po-md-12">
        </po-combo>

        <po-container
         class="po-md-12">
          <div class="d-flex space-between">
            <p class="po-font-text-large-bold">Previsão do tempo de hoje para a cidade de {{ cityName }}</p>
            <i (click)="changeStarStyle()" [class]="starStyle" style="font-size: 28px; color: gold;"></i>
          </div>
          <div class="d-flex space-between po-mt-3 po-md-12">
            <po-info class="po-md-3" p-label="Horário" [p-value]="simpleFormatField(forecastResults.time,'h')"></po-info>
            <po-info class="po-md-3" p-label="Temperatura atual" [p-value]="simpleFormatField(forecastResults.temp, '°C')"></po-info>
            <po-info class="po-md-3" p-label="Condição" [p-value]="forecastResults.description"></po-info>
            <div class="d-flex start-flex flex-row po-md-3">
              <span class="po-info-label">Tempo</span>
              <img [src]="weatherConditionImage" />
            </div>
          </div>
          <po-divider></po-divider>
          <div class="d-flex space-between po-mt-1 po-mb-2 po-md-12">
            <po-info class="po-md-3" p-label="Umidade" [p-value]="simpleFormatField(forecastResults.humidity, '%')"></po-info>
            <po-info class="po-md-3" p-label="Nebulosidade" [p-value]="simpleFormatField(forecastResults.cloudiness, '%')"></po-info>
            <po-info class="po-md-3" p-label="Chuva" [p-value]="simpleFormatField(forecastResults.rain, 'mm')"></po-info>
            <po-info class="po-md-3" p-label="Vento" [p-value]="forecastResults.wind_speedy"></po-info>
          </div>
          <po-divider></po-divider>
          <div class="d-flex space-between po-mt-1 po-md-12">
            <po-info class="po-md-3" p-label="Nascer do Sol" [p-value]="timeFormatField(forecastResults.sunrise)"></po-info>
            <po-info class="po-md-3" p-label="Pôr do Sol" [p-value]="timeFormatField(forecastResults.sunset)"></po-info>
            <po-info class="po-md-3" p-label="Fuso Horário" [p-value]="simpleFormatField(forecastResults.timezone, 'h')"></po-info>
            <div class="d-flex start-flex flex-row po-md-3">
              <span class="po-info-label">Fase da Lua</span>
              <img [src]="moonPhaseImage" />
            </div>
          </div>
        </po-container>
      </po-container>
      <po-container class="po-md-5" [p-title]="mapTitle">
        <app-totvs-map class="d-flex center-flex" (selectedStateEvent)="setState($event)"></app-totvs-map>
      </po-container>
    </div>

    <po-widget
      p-primary-label="Ver histórico de consultas"
      (p-primary-action)="slider.open()"
      p-title="Previsão do tempo para os próximos dias"
      class="po-md-12 po-mt-3">

      <div *ngFor="let forecast of nextDaysForecast">
        <p>{{ forecast }}</p>
      </div>

    </po-widget>

  </po-page-default>
  <po-page-slide
    p-title="Histórico de Consultas"
    #slider>

  </po-page-slide>
</div>


